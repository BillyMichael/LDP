traefik:
  providers:
    kubernetesCRD:
      allowExternalNameServices: true
      allowCrossNamespace: true
    kubernetesIngress:
      allowExternalNameServices: true
      publishedService:
        enabled: true

  # Deployment configuration
  deployment:
    kind: DaemonSet

  tlsStore:
    default:
      defaultCertificate:
        secretName: default-tls

  # Enable dashboard
  ingressRoute:
    dashboard:
      enabled: true

  # Ports configuration
  ports:
    web:
      port: 80
      exposedPort: 80
      nodePort: 30080
    websecure:
      port: 443
      exposedPort: 443
      nodePort: 30443
    traefik:
      port: 9000
      exposedPort: 9000
      nodePort: 30900

  # Service configuration
  service:
    type: NodePort

  # Enable metrics
  metrics:
    prometheus:
      enabled: true

  # Additional arguments
  additionalArguments:
    - --api.insecure=true
    - --log.level=INFO

  # Node selector to ensure Traefik runs on control-plane
  nodeSelector:
    ingress-ready: "true"
  tolerations:
    - key: node-role.kubernetes.io/control-plane
      operator: Exists
      effect: NoSchedule
    - key: node-role.kubernetes.io/master
      operator: Exists
      effect: NoSchedule
